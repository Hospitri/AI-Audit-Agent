<main class="max-w-[1060px] w-full mx-auto px-6 py-6 md:py-8">
  <!-- Top row: logo + heading group -->
  <div class="grid grid-cols-[auto_1fr] gap-6 items-center">
    <div class="flex items-center gap-2">
      <!-- Hospitri brand -->
      <img class="h-[32px]" src="assets/hospitri-logo-green.svg" alt="Hospitri" />
    </div>

    <div class="flex flex-col items-end">
      <div class="text-[15px] text-[var(--brand)]">Here’s your free audit!</div>
      <% const listingTitle = (audit && (audit.listing_title || (audit.meta && audit.meta.title))) || ''; %>
      <h1 class="font-heading text-[34px] md:text-[40px] leading-tight text-[var(--text)]">
        <%= listingTitle || 'Your Listing' %>
      </h1>
    </div>
  </div>

  <!-- Category breakdown -->
  <section class="mt-8">
    <div class="flex flex-row items-end justify-between mb-[16px]">
      <div class="flex items-center gap-2">
        <span class="w-[2px] h-5 rounded-sm" style="background: var(--brand)"></span>
        <h2 class="text-[18px] font-bold text-[var(--heading)]">Category Breakdown</h2>
      </div>
      <!-- Score pill -->
      <div class="flex items-center justify-end gap-2">
        <div class="flex flex-row items-center rounded-full pl-[4px] pr-[20px] py-[4px] border border-[#858585] bg-[#E1F579] gap-[16px]">
          <div class="flex flex-row items-center gap-2 bg-[#064541] rounded-full py-[4px] px-[14px]">
            <!-- star -->
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M12 3.8 14.9 9l5.7.8-4.1 4 1 5.7L12 16.8 6.5 19.5l1-5.7-4.1-4L9.1 9 12 3.8Z" stroke="#E1F67A" stroke-width="1.4" fill="none"/>
            </svg>
            <span class="inline-flex items-center gap-1 rounded-full text-[20px] font-bold text-[#E1F579]">
              <%= Number(audit?.overall_score || 0).toFixed(1) %>
            </span>
          </div>
          <span class="text-[13px] text-[var(--text)]">Overall score</span>
        </div>
      </div>
    </div>

    <% 
      const order = ['title','description','images','amenities','reviews','pricing','policies_fees','response_speed'];
      const labels = {
        title:'Title', description:'Description', images:'Images', amenities:'Amenities',
        reviews:'Reviews', pricing:'Pricing', policies_fees:'Policies fees', response_speed:'Response speed'
      };
      const icons = {
        title:'doc-icon.svg', description:'lines-icon.svg', images:'image-icon.svg',
        amenities:'wifi-icon.svg', reviews:'chat-icon.svg', pricing:'receipt-icon.svg',
        policies_fees:'receipt-icon.svg', response_speed:'bolt-icon.svg'
      };
      const cb = audit?.category_breakdown || {};
    %>

    <div class="two-col">
      <% order.forEach((k)=>{ const v = cb?.[k] || {}; %>
        <article class="avoid-break rounded-card border shadow-soft bg-[var(--card)] p-4 relative" style="border-color: var(--border)">
          <div class="flex items-center justify-between mb-2">
            <div class="flex items-center rule-after">
              <h3 class="font-semibold"><%= labels[k] %></h3>
            </div>
            <div class="w-full h-[1px] bg-[#064541]"></div>
            <img class="h-[30px]" src="assets/<%= icons[k] %>" alt="" />
          </div>
          <div class="text-sm leading-relaxed">
            <p class="mb-1"><span class="font-semibold">Score: <%= v.numeric ?? '—' %></span> — Grade: <%= v.grade || '—' %></p>
            <% if (v.what_works) { %>
              <p class="mb-1"><span class="font-semibold">What works:</span> <%= v.what_works %></p>
            <% } %>
            <% if (v.what_to_improve) { %>
              <p><span class="font-semibold">Improve:</span> <%= v.what_to_improve %></p>
            <% } %>
          </div>
        </article>
      <% }) %>
    </div>
  </section>

  <!-- Quick wins -->
  <section class="mt-7">
    <div class="flex items-center gap-2 mb-3">
      <span class="w-[2px] h-5 rounded-sm" style="background: var(--brand)"></span>
      <h2 class="text-[18px] font-semibold text-[var(--heading)]">Quick Wins</h2>
    </div>

    <ul class="space-y-2">
      <% (audit?.quick_wins || []).slice(0,3).forEach(q => { %>
        <li class="avoid-break rounded-card p-1 flex items-center gap-3">
          <div class="flex items-center gap-2">
            <img class="h-[18px]" src="assets/chevron-circle-right.svg" alt="" />
            <span class="font-semibold"><%= q.action %></span>
          </div>
          <div class="flex items-center gap-2 text-xs">
            <span class="px-2 py-1 rounded-full border" style="background: white; color: #262626; border-color: #737373">
              Effort: <%= q.effort %>
            </span>
            <span class="px-2 py-1 rounded-full border" style="background: #e1f579; color: #262626; border-color: #858585">
              Impact: <%= q.potential_uplift %><% if (q.potential_uplift_type){ %> (<%= q.potential_uplift_type %>)<% } %>
            </span>
          </div>
        </li>
      <% }) %>
    </ul>

    <!-- legend strip -->
    <div class="avoid-break mt-3 rounded-[10px] border px-[12px] py-[12px] text-[12px] text-[#737373] text-center"
         style="border-color: var(--border); background: var(--qwin-bg)">
      Legend: $ = revenue impact, ⚡ = guest-experience impact. More symbols = higher impact (e.g., $$$, ⚡⚡ ).
    </div>
  </section>

  <!-- Pro tip -->
  <section class="mt-7">
    <div class="flex items-center gap-2 mb-2">
      <span class="w-[2px] h-5 rounded-sm" style="background: var(--brand)"></span>
      <h2 class="text-[18px] font-semibold text-[var(--heading)]">Pro Tip</h2>
    </div>
    <p class="text-[15px] max-w-[920px]">
      <%= audit?.pro_tip || '' %>
    </p>
  </section>
</main>
