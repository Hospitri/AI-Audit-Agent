erDiagram
  CLASSIFICATIONS ||--o{ LEADS : "classification_id"
  LEAD_STATUSES  ||--o{ LEADS : "lead_status_id"
  DEMO_STATUSES  ||--o{ LEADS : "demo_status_id"
  PRIORITIES     ||--o{ LEADS : "priority_id"
  LISTING_RANGE_BUCKETS ||--o{ LEADS : "range_bucket_id"
  SOURCES        ||--o{ LEADS : "source_id"
  VPMS           ||--o{ LEADS : "assigned_vpm_id"

  LEADS          ||--o{ LEAD_LIST_MEMBERSHIPS : "lead_id"
  LISTS          ||--o{ LEAD_LIST_MEMBERSHIPS : "list_id"

  LEADS          ||--o{ LISTINGS : "lead_id"
  LISTINGS       ||--o{ LISTING_PUBLICATIONS : "listing_id"

  LEADS          ||--o{ AUDITS : "lead_id"
  LISTINGS       ||--o{ AUDITS : "listing_id (optional)"

  CLASSIFICATIONS {
    uuid id PK
    text slug UNIQUE
    text name
  }

  LEAD_STATUSES {
    uuid id PK
    text slug UNIQUE
    text name
  }

  DEMO_STATUSES {
    uuid id PK
    text slug UNIQUE
    text name
  }

  SOURCES {
    uuid id PK
    text slug UNIQUE
    text name
  }

  PRIORITIES {
    uuid id PK
    text slug UNIQUE
    text name
  }

  LISTS {
    uuid id PK
    text slug UNIQUE
    text name
  }

  LISTING_RANGE_BUCKETS {
    uuid id PK
    text slug UNIQUE
    text name
    int  min_count
    int  max_count
  }

  VPMS {
    uuid id PK
    text name
    citext email UNIQUE
    timestamptz created_at
    timestamptz updated_at
  }

  LEADS {
    uuid id PK
    timestamptz created_at
    timestamptz updated_at
    text  name
    citext email
    text  phone         "E.164 or NULL"
    text  location
    uuid  classification_id FK
    uuid  lead_status_id FK
    uuid  demo_status_id FK
    uuid  priority_id FK
    uuid  range_bucket_id FK
    int   actual_listings
    uuid  source_id FK
    text  source_url
    uuid  assigned_vpm_id FK
  }

  LEAD_LIST_MEMBERSHIPS {
    uuid  lead_id FK
    uuid  list_id FK
    timestamptz joined_at
    -- PK (lead_id, list_id)
  }

  LISTINGS {
    uuid id PK
    timestamptz created_at
    timestamptz updated_at
    uuid lead_id FK
    text title
    text description
  }

  LISTING_PUBLICATIONS {
    uuid id PK
    timestamptz created_at
    uuid listing_id FK
    text platform
    text url
    -- UNIQUE (listing_id, url)
  }

  AUDITS {
    uuid id PK
    timestamptz created_at
    uuid lead_id FK
    uuid listing_id FK  "nullable"
    text listing_url
    text listing_title
    numeric overall_score  "NUMERIC(4,1)"
    text submission_id     "UNIQUE"
  }
